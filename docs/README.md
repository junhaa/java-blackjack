# 1단계
### 기능 요구 사항

- [x] 카드 덱 초기화
  - 카드는 모양과 숫자를 갖는다.
    - 모양은 하트, 스페이드, 클로버, 다이아몬드가 있다.
  - 일반 카드는 숫자를 기본으로 갖는다.
  - 특수 카드는 매칭되는 숫자를 갖는다.
    - Ace는 1 또는 11로 계산한다.
    - King, Queen, Jack은 각각 10으로 계산한다.
  - 카드는 섞여있다.

- [x] 참여자 이름 입력
  - 쉼표 기준 분리

- [x] 초기 카드 배분
  - 딜러와 플레이어들에게 카드를 2장씩 배분한다.
  - 현재 보유 카드 출력
    - 딜러는 첫 번째 카드만 공개한다.

- [x] 플레이어별 카드 추가 배분<br>
  - 플레이어에게 카드를 추가 배분하려면 다음 기준을 모두 만족해야 한다.
    - [x] 플레이어가 보유한 카드의 합이 21 미만이다.
    - [x] 플레이어의 응답이 y이다.
  - [x] 플레이어가 보유한 카드의 합이 21 이상이거나 플레이어의 응답이 n이면<br>
    카드 배분을 멈추고 다음 플레이어 턴으로 이동한다.

- [x] 딜러 카드 추가 배분
  - 초기 카드 2장의 합계가 16이하이면 반드시 한 장 더 받고 17점 이상이면 추가로 받을 수 없다.

- 두 장의 숫자 카드를 합쳐 21 또는 21에 가깝게 만든 플레이어 또는 딜러가 승리한다.
- [x] 결과 산출 및 출력
  - [x] 플레이어가 버스트 한 경우
    - 딜러도 버스트 했다면 무승부이다.
    - 딜러가 버스트 하지 않았다면 플레이어의 패배이다.
  - [x] 플레이어가 블랙잭인 경우
    - 딜러도 블랙잭이라면 무승부이다.
    - 딜러가 블랙잭이 아니라면 플레이어의 승리이다.
  - [x] 그 외의 경우 카드의 합이 큰 쪽이 승리한다.

- 카드 합 계산 기능
  - [x] 에이스를 소프트 핸드로 계산했을 때 총합이 21을 넘지 않는다면, 에이스는 소프트 핸드로 계산한다.
  - [x] 에이스가 없는 경우 단순 카드 합을 계산한다.

- [x] 최종 승패 출력
  - [x] 딜러의 최종 승패 출력
  - [x] 플레이어들의 최종 승패 출력

*** 
## 책임 주도 설계

## 협력
승패를 결정하는 협력
- 심판은 참가자들의 카드 뭉치를 보고 승패를 정할 수 있다.

초기 카드를 배분하는 협력
- 카드 덱은 플레이어와 딜러에게 각각 2장씩 카드를 배분한다.
- 플레이어는 카드 덱으로부터 카드 2장을 받는다.
- 딜러는 카드 덱으로부터 카드 2장을 받는다.

추가 카드를 배분하는 협력
- 게임보드는 플레이어와 딜러에게 현재 보유한 카드 합계를 묻는다.
  - 게임보드는 딜러 카드 합계가 16이하이면 카드 덱에게 추가 카드를 요청한다.
  - 게임보드는 플레이어 카드 합계가 21 미만일 경우 유저에게 추가 카드를 요청할 것인지 묻는다.
    - y를 입력 받을 경우 카드 덱에게 추가 카드를 요청한다.

## 역할별 책임
- 게임보드
  - 게임을 진행한다.
    - 카드 덱을 활용해 플레이어와 딜러에게 초기 카드를 배분한다.
    - 플레이어의 카드 합계를 보고 유저에게 추가 카드를 요청 여부를 묻는다.
    - 딜러의 카드 합계를 보고 추가 카드 요청 여부를 결정한다.
    - 플레이어와 딜러에게 최종 카드 합계를 물어본다.
    - 심판에게 승패를 물어본다.
- 카드 덱 공장
  - 카드 덱을 만든다.
- 카드 덱
  - 보유한 카드를 순서대로 배분한다.
- 카드
  - 모양과 숫자를 관리한다.
- 플레이어
  - 이름과 현재 보유 카드를 관리한다.
  - 현재 보유 카드 합계를 계산한다.
- 딜러
  - 현재 보유 카드를 관리한다.
  - 현재 보유 카드 합계를 계산한다.
- 심판
  - 플레이어와 딜러를 받아 승패를 계산한다.

***
# 2단계

추가로 구현해야 하는 기능
- 플레이어가 카드를 추가로 뽑아 21을 초과할 경우 배팅 금액을 모두 잃게 된다.
- 플레이어가 블랙잭이 되면 베팅 금액의 1.5 배를 딜러에게 받는다.
- 딜러와 플레이어가 모두 동시에 블랙잭인 경우 플레이어는 베팅한 금액을 돌려받는다(무승부).
- 딜러가 버스트인 경우, 해당 시점에 남아있는 플레이어는 모두 승리한다.

What, Who 사이클을 적용하자.
1. What(필요한 협력 정의)
- 플레이어의 배팅 금액을 읽어라
- 플레이어가 돌려 받을 금액을 계산해라
  - 플레이어가 승리했는가?
    - 플레이어가 블랙잭인가?
  - 플레이어가 패배했는가?
- 딜러가 돌려 받을 금액을 계산해라

2. Who(메시지 송수신자 결정)
- [x] 플레이어의 이름과 배팅 금액으로 플레이어들을 생성하라 (Application -> GameBoard -> Players -> Player)
  - 플레이어의 이름과 배팅 금액을 읽어라 (Application -> InputView)
- [x] 게임 결과에 따라 플레이어의 수익을 계산해라 (Application -> GameBoard -> Outcome)
  - 플레이어가 승리했는가? (내부 메시지로서 Outcome 스스로 수행)
    - 플레이어가 블랙잭인가? (Outcome -> Player)
  - 플레이어가 패배했는가? (내부 메시지로서 Outcome 스스로 수행)
- [x] 딜러의 수익을 계산해라 (Application -> GameBoard -> Outcome)

